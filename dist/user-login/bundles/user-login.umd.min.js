!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@angular/router"),require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("angularx-social-login")):"function"==typeof define&&define.amd?define("user-login",["exports","@angular/forms","@angular/router","@angular/core","@angular/common/http","rxjs","rxjs/operators","angularx-social-login"],t):t(e["user-login"]={},e.ng.forms,e.ng.router,e.ng.core,e.ng.common.http,e.rxjs,e.rxjs.operators,e.angularxSocialLogin)}(this,function(e,t,o,n,r,i,a,s){"use strict";var c=(l.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[]},l.ngInjectableDef=n.defineInjectable({factory:function(){return new l},token:l,providedIn:"root"}),l);function l(){}var u=(p.prototype.ngOnInit=function(){},p.decorators=[{type:n.Component,args:[{selector:"ngtek-joomla-login",template:"<app-joomla-login></app-joomla-login>\n"}]}],p.ctorParameters=function(){return[]},p);function p(){}var g=(d.prototype.init=function(e){return this.baseUrl=e,this},d.prototype.logout=function(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)},d.prototype.doSocialLogin=function(e,t){var o=this;this.headers.append("Content-Type","application/x-www-form-urlencoded"),this.headers.append("Access-Control-Allow-Origin","*");var n={access_token:e,provider:t};return new Promise(function(t){o.http.post(o.baseUrl+o.socialloginApi,n,{headers:o.headers}).subscribe(function(e){localStorage.setItem("currentUser",JSON.stringify(e.data)),o.currentUserSubject.next(e.data),t(e),alert(" Login Successfully")})})},d.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],d.ctorParameters=function(){return[{type:r.HttpClient}]},d.ngInjectableDef=n.defineInjectable({factory:function(){return new d(n.inject(r.HttpClient))},token:d,providedIn:"root"}),d);function d(e){this.http=e,this.socialloginApi="/index.php?option=com_api&app=users&resource=jfbconnect",this.headers=new r.HttpHeaders,this.currentUserSubject=new i.BehaviorSubject(JSON.parse(localStorage.getItem("currentUser"))),this.currentUser=this.currentUserSubject.asObservable()}var f=(h.prototype.ngOnInit=function(){var t=this;this.socialloginService.init(this.siteUrl),this.authService.authState.subscribe(function(e){t.loggedIn=null!=e})},h.prototype.signInWithGoogle=function(){var t=this;this.authService.signIn(s.GoogleLoginProvider.PROVIDER_ID).then(function(e){t.socialloginService.doSocialLogin(e.authToken,e.provider).then(function(e){t.signInUserData.emit(e),t.navUrl?t.router.navigate(["/"+t.navUrl]):t.signInUserData.emit(e)})})},h.prototype.signInWithFB=function(){var t=this;this.authService.signIn(s.FacebookLoginProvider.PROVIDER_ID).then(function(e){t.socialloginService.doSocialLogin(e.authToken,e.provider).then(function(e){t.signInUserData.emit(e)})})},h.prototype.signOut=function(){this.socialloginService.logout(),this.authService.signOut().then(function(e){alert("Successfully signOut")})},h.decorators=[{type:n.Component,args:[{selector:"app-joomla-sociallogin",template:'<button mdbBtn [hidden]="!facebook" color="primary" class="mb-3" block="true"  (click)="signInWithFB()">\n    <span class="fa fa-google text-capitalize"> Sign in with facebook</span>\n  </button>\n  <button mdbBtn [hidden]="!google" color="danger" class="mb-3" block="true"  (click)="signInWithGoogle()">\n   <span class="fa fa-google text-capitalize"> Sign in with Google</span>\n    \n  </button>\n  <button mdbBtn color="info" block="true" class="mb-3" (click)="signOut()">\n    <span class="fa fa-google text-capitalize"> Logout</span>\n  </button>',styles:[""]}]}],h.ctorParameters=function(){return[{type:s.AuthService},{type:g},{type:o.Router}]},h.propDecorators={facebook:[{type:n.Input}],google:[{type:n.Input}],siteUrl:[{type:n.Input}],signInUserData:[{type:n.Output}],navUrl:[{type:n.Input}]},h);function h(e,t,o){this.authService=e,this.socialloginService=t,this.router=o,this.signInUserData=new n.EventEmitter}var m=(v.prototype.init=function(e){return this.baseUrl=e,this},v.prototype.login=function(e,t){var o=this,n=new FormData;return n.append("username",e),n.append("password",t),this.http.post(this.baseUrl+this.loginApi,n,{headers:this.headers}).pipe(a.map(function(e){return e.err_code||!e.data.auth&&!e.data.id||(localStorage.setItem("currentUser",JSON.stringify(e.data)),o.currentUserSubject.next(e.data)),e.data}))},v.prototype.logout=function(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)},v.prototype.getCurrentUser=function(){return this.currentUserSubject.value},v.prototype.isLoggedIn=function(){return!!this.getCurrentUser().auth},v.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[{type:r.HttpClient}]},v.ngInjectableDef=n.defineInjectable({factory:function(){return new v(n.inject(r.HttpClient))},token:v,providedIn:"root"}),v);function v(e){this.http=e,this.loginApi="/index.php?option=com_api&app=users&resource=login",this.headers=new r.HttpHeaders({"X-Auth":"login"}),this.currentUserSubject=new i.BehaviorSubject(JSON.parse(localStorage.getItem("currentUser"))),this.currentUser=this.currentUserSubject.asObservable()}var b=(y.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({username:["",t.Validators.required],password:["",t.Validators.required]})},Object.defineProperty(y.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),y.prototype.doLogin=function(){var t=this;this.loginService.init(this.siteUrl),this.loginService.login(this.f.username.value,this.f.password.value).subscribe(function(e){t.navUrl?t.router.navigate(["/"+t.navUrl]):t.loginUserData.emit(e)})},y.prototype.getSocialSignInUserData=function(e){console.log("getFBSignInUserData - ",e)},y.decorators=[{type:n.Component,args:[{selector:"app-joomla-login",template:'\x3c!-- Default form login --\x3e\n<form class="text-center border-light p-3" [formGroup]="loginForm" (ngSubmit)="doLogin()">\n\n\n    <p class="h4 mb-4">Sign in</p>\n  \n    \x3c!-- Email --\x3e\n    <input required formControlName="username" type="text" class="form-control mb-4" placeholder="E-mail/Username">\n  \n    \x3c!-- Password --\x3e\n    <input required formControlName="password" type="password" class="form-control mb-4" placeholder="Password">\n  \n    \x3c!-- Sign in button --\x3e\n    <button mdbBtn color="info" block="true" class="my-4" type="submit"><span class="text-capitalize">Login</span></button>\n  \n    <app-joomla-sociallogin [hidden]="!sociallogin" [navUrl]="navUrl" [siteUrl]="siteUrl" [facebook]="facebook" [google]="google" (signInUserData)="getSocialSignInUserData($event)">\n    </app-joomla-sociallogin>\n  </form>\n  \n  \x3c!-- Default form login --\x3e\n  ',styles:[""]}]}],y.ctorParameters=function(){return[{type:t.FormBuilder},{type:m},{type:o.Router}]},y.propDecorators={siteUrl:[{type:n.Input}],sociallogin:[{type:n.Input}],facebook:[{type:n.Input}],google:[{type:n.Input}],navUrl:[{type:n.Input}],loginUserData:[{type:n.Output}]},y);function y(e,t,o){this.formBuilder=e,this.loginService=t,this.router=o,this.loginUserData=new n.EventEmitter}var S=s.GoogleLoginProvider.PROVIDER_ID,I=s.FacebookLoginProvider.PROVIDER_ID,U=new s.AuthServiceConfig([{id:S,provider:new s.GoogleLoginProvider("1005635293950-29g89s87fm0dvj3540rsufta0oguts1l.apps.googleusercontent.com")},{id:I,provider:new s.FacebookLoginProvider("2037079629930934")}]);function j(){return U}var x=(D.decorators=[{type:n.NgModule,args:[{declarations:[u,b,f],imports:[t.FormsModule,t.ReactiveFormsModule,r.HttpClientModule,t.ReactiveFormsModule,s.SocialLoginModule],exports:[u,b,f],providers:[m,{provide:s.AuthServiceConfig,useFactory:j}],schemas:[n.NO_ERRORS_SCHEMA]}]}],D);function D(){}e.UserLoginService=c,e.UserLoginComponent=u,e.provideConfig=j,e.UserLoginModule=x,e.LoginComponent=b,e.SocialloginComponent=f,e.LoginService=m,e.Éµa=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=user-login.umd.min.js.map